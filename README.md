# music-intro-add
Скрипт автоматически добавляет заданное интро (джингл) в начало каждого MP3-трека из папки music. Интро играет заданное количество секунд, затухает к концу и микшируется с основной песней. Результаты сохраняются в папку gotovo с сохранением метаданных исходных треков.
Зависимости

FFmpeg — инструмент для обработки аудио/видео.
Установите:
```
sudo apt install ffmpeg
```

Python-библиотеки:
```
subprocess (стандартная) — для запуска ffmpeg.

pathlib (стандартная) — для работы с путями.
```
Структура скрипта
Константы
```
MUSIC_DIR = Path("music")          # папка с песнями
GLUE_FILE = Path("glue/intro.mp3") # интро/джингл
OUT_DIR = Path("gotovo")           # папка для сохранения результата

INTRO_DURATION = 5                 # сколько секунд интро звучит
FADE_DURATION = 2                  # длительность затухания интро
INTRO_VOLUME = 1.5                 # громкость интро (1.0 = нормальная)

AUDIO_CODEC = ["-c:a", "libmp3lame", "-q:a", "2"]  
META_FLAGS  = ["-map_metadata", "0", "-id3v2_version", "3"]  
```

MUSIC_DIR — папка с исходными треками.

GLUE_FILE — путь к файлу интро.

OUT_DIR — папка для готовых файлов.

INTRO_DURATION — длина звучания интро в начале трека.

FADE_DURATION — время затухания интро.

INTRO_VOLUME — громкость интро (например, 0.5 в 2 раза тише основной).

AUDIO_CODEC — кодек и настройки качества выходного MP3.

META_FLAGS — сохраняет метаданные исходной песни.

Функция process_track(track: Path)

Назначение:
Добавляет интро к указанному треку и сохраняет результат.

Параметры:
```
track: Path — путь к исходному треку.
```
Возвращает:
Путь к новому файлу с добавленным интро.

Основная логика:
```
Создает папку gotovo, если её нет.

Формирует имя выходного файла (.mp3).

Строит фильтр filter_complex для ffmpeg:

atrim — обрезает интро по длительности.

asetpts — нормализует таймкоды.

volume — регулирует громкость интро.

afade — плавно затухает интро.

amix — смешивает интро и основную дорожку.

Запускает ffmpeg через subprocess.run().
```
Пример команды ffmpeg:
```
ffmpeg -y -i song.mp3 -i intro.mp3 \
-filter_complex "[1:a]atrim=0:5,asetpts=PTS-STARTPTS,volume=1.5,afade=t=out:st=3:d=2[a1];[0:a][a1]amix=inputs=2:duration=first:dropout_transition=2[m]" \
-map "[m]" -c:a libmp3lame -q:a 2 -map_metadata 0 -id3v2_version 3 output.mp3
```
Функция main()

Назначение:
Организует процесс обработки всех MP3-треков.

Этапы работы:

Проверяет наличие папки music и файла intro.mp3.

Ищет все .mp3 файлы в папке music.

Последовательно вызывает process_track() для каждого трека.

Выводит статус обработки.

Пример использования

Структура проекта:
```
project/
│
├── script.py
├── music/
│   ├── track1.mp3
│   └── track2.mp3
└── glue/
    └── intro.mp3
```

Запуск:
```
python3 script.py
```

Результат:

Найдено треков: 2
✔ track1.mp3 → track1.mp3
✔ track2.mp3 → track2.mp3

✅ Готово. Интро наложено на первые 5 c (fade 2 c), громкость интро = 1.5. Метаданные/название сохранены.


Готовые треки появятся в папке gotovo.

Возможные ошибки

❌ Папка music не найдена — создайте её и добавьте туда файлы.

❌ Файл интро не найден — убедитесь, что glue/intro.mp3 существует.

⚠ Ошибка ffmpeg — проверьте корректность аудиофайлов или обновите ffmpeg.
